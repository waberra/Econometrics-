<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FIML in Simultaneous Equations (Wooldridge 12.5)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .red-title {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #a71e2a;
        }

        .red-title h1 {
            font-size: 2.3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .red-title p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .blue-concepts {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 25px;
        }

        .blue-concepts h3 {
            font-size: 1.7em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .measures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .measure-card {
            padding: 18px;
            border-radius: 15px;
            border: 3px solid;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .fiml-card   { background: linear-gradient(135deg, #28a745, #20c997); border-color:#1e7e34; color:white; }
        .limited-card{ background: linear-gradient(135deg, #6f42c1, #8e44ad); border-color:#563d7c; color:white; }
        .assump-card { background: linear-gradient(135deg, #17a2b8, #138496); border-color:#117a8b; color:white; }
        .compare-card{ background: linear-gradient(135deg, #ffc107, #ff8800); border-color:#d39e00; color:#212529; }

        .measure-card h4 {
            font-size: 1.2em;
            margin-bottom: 10px;
            text-align: center;
        }

        .measure-card .formula {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 8px;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-align: center;
            font-size: 0.85em;
        }

        .measure-card .description { margin-bottom: 10px; font-size:0.9em; }
        .measure-card .use-cases   { margin-bottom: 10px; font-style: italic; font-size:0.85em; }
        .measure-card .examples    { font-size:0.8em; border-top: 2px solid rgba(255,255,255,0.3); padding-top: 8px; }

        .interactive-section {
            padding: 25px;
            background: #f8f9fa;
        }

        .control-panel {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #007bff;
        }

        .scenario-display,
        .calculation-area {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .scenario-display { border-left: 5px solid #28a745; }
        .calculation-area { border-left: 5px solid #ffc107; }

        .btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin: 6px 4px;
            box-shadow: 0 4px 10px rgba(40,167,69,0.3);
        }

        .btn:hover {
            background: linear-gradient(135deg, #20c997, #28a745);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            box-shadow: 0 4px 10px rgba(108,117,125,0.3);
        }

        .data-block {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #007bff;
            margin: 10px 0 0 0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size:0.9em;
        }

        .data-table th, .data-table td {
            border: 1px solid #dee2e6;
            padding: 6px 8px;
            text-align: center;
        }

        .options-grid {
            display:grid;
            grid-template-columns: repeat(auto-fit, minmax(230px,1fr));
            gap:10px;
            margin-top:10px;
        }

        .option-checkbox {
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            border-radius: 10px;
            padding: 8px 10px;
            border: 2px solid #ced4da;
            display:flex;
            gap:8px;
            align-items:flex-start;
            font-size:0.85em;
        }

        .question-card {
            background:#f8f9fa;
            border-radius:10px;
            border:2px solid #dee2e6;
            padding:12px;
            margin:10px 0;
            font-size:0.9em;
        }

        .question-card h5 {
            margin-bottom:6px;
            color:#007bff;
            font-size:0.95em;
        }

        .question-input {
            margin-top:6px;
            display:flex;
            flex-wrap:wrap;
            align-items:center;
            gap:6px;
        }

        .question-input input {
            padding:6px 8px;
            border-radius:6px;
            border:1px solid #ced4da;
            min-width:100px;
        }

        .feedback {
            margin-top:4px;
            font-size:0.85em;
        }

        .feedback.correct {
            color:#155724;
        }

        .feedback.incorrect {
            color:#721c24;
        }

        .step-explanation {
            margin-top:6px;
            font-size:0.85em;
            background:white;
            border-radius:6px;
            padding:8px;
            border-left:3px solid #17a2b8;
        }

        .interpretation-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding:15px;
            border-radius:10px;
            margin:15px 0;
            border:2px solid #2196f3;
            font-size:0.9em;
        }

        .score-display {
            background: linear-gradient(135deg, #e83e8c, #d91a72);
            color:white;
            padding:15px;
            text-align:center;
            border-radius:12px;
            margin:10px 0 20px 0;
            border:3px solid #c7185d;
            box-shadow:0 4px 15px rgba(232,62,140,0.3);
            font-size:0.9em;
        }

        @media (max-width:768px) {
            .measures-grid { grid-template-columns:1fr; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="red-title">
        <h1>üìä Full Information Maximum Likelihood (FIML) ‚Äì Wooldridge 12.5</h1>
        <p>Understand how FIML uses the entire simultaneous system, and how it compares to 2SLS and LIML</p>
    </div>

    <div class="blue-concepts">
        <h3>üìò Key Ideas: FIML, Limited-Information Methods, Assumptions, and Trade-offs</h3>
        <div class="measures-grid">
            <div class="measure-card fiml-card">
                <h4>Full Information Maximum Likelihood (FIML)</h4>
                <div class="formula">
                    Maximise joint likelihood of all equations and errors in the system
                </div>
                <div class="description">
                    FIML estimates all structural equations in a simultaneous equations model jointly, using the full system and distributional assumptions (often joint normality of errors).
                </div>
                <div class="use-cases">
                    <strong>Use:</strong> When the full system is correctly specified and you want maximum efficiency.
                </div>
                <div class="examples">
                    <strong>Example:</strong> Jointly estimating demand and supply, including error correlations, to obtain efficient structural estimates.
                </div>
            </div>

            <div class="measure-card limited-card">
                <h4>Limited vs Full Information</h4>
                <div class="formula">
                    2SLS / LIML: one equation at a time<br>
                    FIML: whole system at once
                </div>
                <div class="description">
                    Limited-information estimators (2SLS, LIML) use only information from a single equation plus instruments, ignoring the full joint distribution. FIML uses all equations and cross-equation information.
                </div>
                <div class="use-cases">
                    <strong>Use:</strong> Comparing robustness: limited-information is safer under misspecification; FIML more efficient if the system is correct.
                </div>
                <div class="examples">
                    <strong>Example:</strong> Estimating just the demand curve by 2SLS vs estimating demand and supply jointly by FIML.
                </div>
            </div>

            <div class="measure-card assump-card">
                <h4>Assumptions for FIML</h4>
                <div class="formula">
                    Correct system + identification + distributional assumptions
                </div>
                <div class="description">
                    FIML requires correct specification of all structural equations and their error covariance structure, as well as identification for each equation. Often, joint normality of errors is assumed.
                </div>
                <div class="use-cases">
                    <strong>Use:</strong> Structural macro models, full simultaneous systems where theory pins down all equations.
                </div>
                <div class="examples">
                    <strong>Example:</strong> A macro model with consumption, investment, interest rates, and output estimated jointly.
                </div>
            </div>

            <div class="measure-card compare-card">
                <h4>Efficiency vs Robustness</h4>
                <div class="formula">
                    FIML: more efficient if correct<br>
                    2SLS/LIML: more robust if some equations wrong
                </div>
                <div class="description">
                    If the entire system is correctly specified, FIML is asymptotically efficient. If some equations or distributional assumptions are wrong, limited-information methods are more robust to misspecification.
                </div>
                <div class="use-cases">
                    <strong>Use:</strong> Empirical choice between ‚Äúsafer‚Äù 2SLS and more ambitious FIML.
                </div>
                <div class="examples">
                    <strong>Example:</strong> Using 2SLS for a single equation in a large macro model where you doubt the correctness of other equations.
                </div>
            </div>
        </div>
    </div>

    <div class="interactive-section">
        <div class="control-panel">
            <h3>üéÆ Interactive Practice: FIML vs 2SLS and LIML</h3>
            <p>
                Each scenario presents a simultaneous system and modeling choices. 
                Decide when FIML would be attractive, when it is risky, and how it compares to 2SLS/LIML.
            </p>
            <button class="btn" onclick="generateScenario()">üìä Generate New Scenario</button>
            <button class="btn btn-secondary" onclick="resetPractice()">üîÑ Reset</button>
        </div>

        <div id="scenarioDisplay" class="scenario-display" style="display:none;">
            <h3 id="scenarioTitle">üìã Scenario</h3>
            <div id="scenarioDescription"></div>
            <div id="dataDisplay"></div>

            <div style="margin-top: 12px; padding: 12px; background:#f8f9fa; border-radius:10px; border-left:4px solid #6c757d;">
                <h4>‚öôÔ∏è Choose Tasks to Practice</h4>
                <p style="font-size:0.85em;color:#555;">
                    Focus on: (i) system completeness, (ii) plausibility of distributional assumptions, 
                    (iii) risk of misspecification, and (iv) efficiency vs robustness trade-offs.
                </p>
                <div class="options-grid">
                    <label class="option-checkbox">
                        <input type="checkbox" id="chkBaseline" checked>
                        <div><strong>üèÅ System & assumptions</strong><br>Summarise how many equations and whether the system seems well specified.</div>
                    </label>
                    <label class="option-checkbox">
                        <input type="checkbox" id="chkOtherMeans" checked>
                        <div><strong>üìä FIML feasibility</strong><br>Is FIML technically feasible and identified for all equations?</div>
                    </label>
                    <label class="option-checkbox">
                        <input type="checkbox" id="chkDifference" checked>
                        <div><strong>üìâ FIML vs 2SLS/LIML</strong><br>Would you prefer limited- or full-information in this scenario?</div>
                    </label>
                    <label class="option-checkbox">
                        <input type="checkbox" id="chkInterpret" checked>
                        <div><strong>üß† Interpretation (open answer)</strong><br>Explain why an applied researcher might or might not use FIML here.</div>
                    </label>
                </div>

                <button class="btn" onclick="generateQuestions()" style="margin-top:10px;">üßÆ Generate Questions</button>
            </div>
        </div>

        <div id="calculationArea" class="calculation-area" style="display:none;">
            <h3>üìù Questions & Feedback</h3>
            <div id="questionsContainer"></div>
            <button class="btn" onclick="checkAnswers()">‚úÖ Check Answers</button>
            <div id="interpretationDisplay"></div>
        </div>

        <div class="score-display">
            <h3>üéØ Practice Progress</h3>
            <div>Scenarios Practiced: <span id="scenariosCompleted">0</span></div>
        </div>
    </div>
</div>

<script>
    console.log("FIML (12.5) practice loaded.");

    var currentScenario = null;
    var scenariosCompleted = 0;
    var currentQuestions = [];

    // Scenarios focusing on when FIML is attractive vs risky
    var scenarios = [
        {
            id: "macroWellSpecified",
            title: "Small Macro Model with Strong Theory",
            description: "You have a small macro model with consumption, investment, interest rates, and output. Economic theory strongly pins down the structure of each equation, and you believe the system is correctly specified and stable over the sample.",
            context: "This is a textbook setting where FIML could be attractive for efficiency.",
            numEquations: 4,
            fullSystemBelievable: 1,
            identificationOK: 1,
            errorNormalPlausible: 1,
            preferFIML: 1,
            explanation:
                "With a small number of equations and strong theoretical structure, the cost of specifying the whole system is manageable. " +
                "If each equation is identified and joint normality of errors is plausible, FIML can exploit cross-equation information and correlations in errors to gain efficiency compared to 2SLS/LIML. " +
                "This is a classic setting where FIML shines, provided the specification is indeed correct."
        },
        {
            id: "largePoorlyKnownSystem",
            title: "Large Structural Model with Many Doubtful Equations",
            description: "You are working with a large structural system of 10 equations in an emerging economy. Several equations are only loosely motivated by theory, and you are not confident that the error terms are jointly normal or that all equations are correctly specified.",
            context: "Here, limited-information methods (2SLS/LIML) are usually preferred for robustness.",
            numEquations: 10,
            fullSystemBelievable: 0,
            identificationOK: 1,
            errorNormalPlausible: 0,
            preferFIML: 0,
            explanation:
                "When many equations are poorly understood or possibly misspecified, imposing a full-system likelihood can be dangerous: misspecification in one equation can contaminate estimates in others. " +
                "Limited-information methods like 2SLS/LIML focus on one equation at a time and are more robust to mistakes elsewhere in the system. " +
                "In such a setting, FIML is technically feasible but rarely advisable in applied work."
        },
        {
            id: "partialConfidence",
            title: "Well-Understood Key Equation, Questionable Rest of System",
            description: "You have a well-motivated demand equation with strong instruments, but supply and other system equations are only loosely specified. You care primarily about the demand parameters.",
            context: "FIML is feasible, but 2SLS/LIML on the demand equation is usually preferred for robustness.",
            numEquations: 3,
            fullSystemBelievable: 0,
            identificationOK: 1,
            errorNormalPlausible: 1,
            preferFIML: 0,
            explanation:
                "If your main interest is a single equation (e.g., demand) and you are not confident about the rest of the system, FIML‚Äôs use of the full system can be a liability. " +
                "2SLS or LIML on the demand equation uses only the identification conditions for that equation and does not require you to get the rest of the system right. " +
                "Thus, limited-information methods offer a better robustness‚Äìefficiency trade-off here."
        }
    ];

    function generateScenario() {
        var idx = Math.floor(Math.random() * scenarios.length);
        currentScenario = scenarios[idx];
        console.log("Scenario:", currentScenario.id);

        currentQuestions = [];

        document.getElementById("scenarioDisplay").style.display = "block";
        document.getElementById("calculationArea").style.display = "none";
        document.getElementById("interpretationDisplay").innerHTML = "";
        document.getElementById("questionsContainer").innerHTML = "";

        document.getElementById("scenarioTitle").textContent = "üìä " + currentScenario.title;

        var descHtml = "";
        descHtml += '<div class="data-block">';
        descHtml += '<h4>üìã System Context:</h4>';
        descHtml += '<p style="margin-top:8px;">' + currentScenario.description + '</p>';
        descHtml += '<p style="margin-top:8px;font-style:italic;color:#6c757d;"><strong>Goal:</strong> ' +
                    currentScenario.context + '</p>';
        descHtml += '</div>';
        document.getElementById("scenarioDescription").innerHTML = descHtml;

        displayData(currentScenario);

        document.getElementById("chkBaseline").checked = true;
        document.getElementById("chkOtherMeans").checked = true;
        document.getElementById("chkDifference").checked = true;
        document.getElementById("chkInterpret").checked = true;
    }

    function displayData(s) {
        var html = "";
        html += '<h4>üìã System Features Relevant for FIML</h4>';
        html += '<div class="data-block">';

        html += '<table class="data-table">';
        html += '<thead><tr><th>Aspect</th><th>Information</th><th>Notes</th></tr></thead><tbody>';

        html += '<tr><td>Number of structural equations</td><td>' +
                s.numEquations + '</td>';
        html += '<td>More equations ‚áí more parameters and structure to get right.</td></tr>';

        html += '<tr><td>Confidence in full system specification</td><td>' +
                (s.fullSystemBelievable ? "High" : "Low") + '</td>';
        html += '<td>FIML is most attractive when this is high.</td></tr>';

        html += '<tr><td>Identification of equations</td><td>' +
                (s.identificationOK ? "All key equations identified" : "Some equations not identified") + '</td>';
        html += '<td>FIML requires identification of the equations being estimated.</td></tr>';

        html += '<tr><td>Joint normality / distributional assumptions plausible?</td><td>' +
                (s.errorNormalPlausible ? "Yes / plausible" : "No / doubtful") + '</td>';
        html += '<td>FIML is derived under specific distributional assumptions on errors.</td></tr>';

        html += '</tbody></table>';

        html += '<p style="margin-top:10px;font-size:0.9em;">';
        html += '<strong>Key principle:</strong> FIML can be more efficient than 2SLS/LIML if the entire system is correctly specified and identification holds. ';
        html += 'However, it is more sensitive to misspecification in any part of the system. Limited-information methods are less efficient but more robust.';
        html += '</p>';

        html += '<p style="margin-top:6px;font-size:0.9em;">';
        html += '<strong>Scenario intuition:</strong> ' + s.explanation;
        html += '</p>';

        html += '</div>';

        document.getElementById("dataDisplay").innerHTML = html;
    }

    function generateQuestions() {
        if (!currentScenario) {
            alert("Please generate a scenario first.");
            return;
        }

        currentQuestions = [];
        var container = document.getElementById("questionsContainer");
        container.innerHTML = "";

        var chkBaseline   = document.getElementById("chkBaseline").checked;
        var chkOtherMeans = document.getElementById("chkOtherMeans").checked;
        var chkDifference = document.getElementById("chkDifference").checked;
        var chkInterpret  = document.getElementById("chkInterpret").checked;

        var s = currentScenario;

        if (chkBaseline) {
            currentQuestions.push({
                conceptId: "numEq",
                type: "numeric",
                title: "üèÅ Number of structural equations",
                prompt: "How many structural equations does this system have?",
                correctValue: s.numEquations,
                unitHint: "(count)"
            });
        }

        if (chkOtherMeans) {
            currentQuestions.push({
                conceptId: "sysBelievable",
                type: "numeric",
                title: "üìä Is the full system specification believable?",
                prompt: "Based on the description, is it reasonable to assume that the full system is correctly specified? Answer 1 for yes, 0 for no.",
                correctValue: s.fullSystemBelievable,
                unitHint: "(1 = yes, 0 = no)"
            });
            currentQuestions.push({
                conceptId: "idOK",
                type: "numeric",
                title: "üìä Are identification conditions (roughly) satisfied?",
                prompt: "Are the key equations described as identified so that FIML could in principle be applied? Answer 1 for yes, 0 for no.",
                correctValue: s.identificationOK,
                unitHint: "(1 = yes, 0 = no)"
            });
        }

        if (chkDifference) {
            currentQuestions.push({
                conceptId: "preferFIML",
                type: "numeric",
                title: "üìâ Would applied researchers tend to prefer FIML here?",
                prompt: "In this scenario, would a careful applied researcher generally be comfortable using FIML (given efficiency vs robustness)? Answer 1 for yes, 0 for no.",
                correctValue: s.preferFIML,
                unitHint: "(1 = yes, 0 = no)"
            });
        }

        if (chkInterpret) {
            currentQuestions.push({
                conceptId: "interpret",
                type: "open",
                title: "üß† Interpretation: FIML vs 2SLS/LIML in this context",
                prompt: "Explain in words whether you would use FIML or stick to limited-information methods in this scenario, and why. Refer to system size, confidence in other equations, and assumptions.",
                correctText: ""
            });
        }

        if (currentQuestions.length === 0) {
            container.innerHTML = "<p>No tasks selected. Tick at least one box.</p>";
            document.getElementById("calculationArea").style.display = "block";
            return;
        }

        var html = "";
        for (var j = 0; j < currentQuestions.length; j++) {
            html += renderQuestionCard(currentQuestions[j], j);
        }
        container.innerHTML = html;

        document.getElementById("calculationArea").style.display = "block";
        document.getElementById("interpretationDisplay").innerHTML = "";
    }

    function renderQuestionCard(q, index) {
        var html = "";
        html += '<div class="question-card">';
        html += '<h5>' + q.title + '</h5>';
        html += '<p>' + q.prompt + '</p>';
        html += '<div class="question-input">';
        html += '<label for="answer_' + index + '"><strong>Your answer:</strong></label>';
        html += '<input type="text" id="answer_' + index + '">';
        if (q.unitHint) {
            html += '<span>' + q.unitHint + '</span>';
        }
        html += '</div>';
        html += '<div id="feedback_' + index + '" class="feedback"></div>';
        html += '<div id="explain_' + index + '" class="step-explanation" style="display:none;"></div>';
        html += '</div>';
        return html;
    }

    function checkAnswers() {
        if (currentQuestions.length === 0) {
            alert("No questions to check. Generate questions first.");
            return;
        }

        var numCorrect = 0;

        for (var i = 0; i < currentQuestions.length; i++) {
            var q = currentQuestions[i];
            var ansInput = document.getElementById("answer_" + i);
            var feedbackEl = document.getElementById("feedback_" + i);
            var explainEl = document.getElementById("explain_" + i);

            if (!ansInput) continue;

            var userRaw = ansInput.value.trim();
            if (userRaw === "") {
                feedbackEl.textContent = "Please enter an answer.";
                feedbackEl.className = "feedback";
                explainEl.style.display = "none";
                continue;
            }

            if (q.type === "numeric") {
                var userVal = parseFloat(userRaw);
                if (isNaN(userVal)) {
                    feedbackEl.textContent = "Please enter a numeric answer.";
                    feedbackEl.className = "feedback";
                    explainEl.style.display = "none";
                    continue;
                }
                var correct = q.correctValue;
                var ok = isCloseNumeric(userVal, correct);
                if (ok) {
                    numCorrect++;
                    feedbackEl.textContent = "‚úÖ Correct (expected about " + correct.toFixed(2) + ").";
                    feedbackEl.className = "feedback correct";
                } else {
                    feedbackEl.textContent = "‚ùå Not quite. A good answer is about " + correct.toFixed(2) + ".";
                    feedbackEl.className = "feedback incorrect";
                }
            } else if (q.type === "open") {
                feedbackEl.textContent = "üìù Thanks for your explanation. Compare it with the expert interpretation below.";
                feedbackEl.className = "feedback";
            }

            explainEl.innerHTML = getExplanationHtml(q);
            explainEl.style.display = "block";
        }

        var interpLines = [];
        interpLines.push("‚Ä¢ You answered " + numCorrect + " out of " + currentQuestions.length + " auto-graded questions correctly (within tolerance).");
        interpLines.push("‚Ä¢ Big picture: FIML is a full-system, maximum-likelihood approach that is efficient when the whole model is right, but limited-information (2SLS/LIML) is often preferred in practice for robustness.");
        document.getElementById("interpretationDisplay").innerHTML =
            '<div class="interpretation-box"><h4>üß† Summary of This Practice Round</h4>' +
            interpLines.join("<br>") + '</div>';

        scenariosCompleted++;
        document.getElementById("scenariosCompleted").textContent = String(scenariosCompleted);
    }

    function isCloseNumeric(userVal, correctVal) {
        var diff = Math.abs(userVal - correctVal);
        var tol = Math.max(0.1, Math.abs(correctVal) * 0.05); // ¬±5% or at least 0.1
        return diff <= tol;
    }

    function getExplanationHtml(q) {
        if (!currentScenario) return "";

        var s = currentScenario;
        var html = "<strong>How to think about this:</strong><br>";

        if (q.conceptId === "numEq") {
            html += "The more equations in the system, the more structure you must specify correctly for FIML to be reliable. ";
            html += "Small, well-understood systems are more suitable for FIML than very large, loosely specified ones.";
        } else if (q.conceptId === "sysBelievable") {
            html += "FIML requires confidence that the full system is reasonably correctly specified. ";
            html += "If that confidence is low, full-information methods can spread misspecification across equations.";
        } else if (q.conceptId === "idOK") {
            html += "Identification is a prerequisite: each equation you want to estimate structurally must be identified. ";
            html += "FIML does not remove the need for exclusion restrictions or other identifying assumptions.";
        } else if (q.conceptId === "preferFIML") {
            html += "When the system is small and well-specified, FIML can be more efficient than 2SLS/LIML. ";
            html += "When the system is large or many equations are doubtful, limited-information methods are generally safer, even if less efficient under the ideal model.";
        } else if (q.conceptId === "interpret") {
            html += "<em>Applied interpretation:</em><br>";
            html += s.explanation + "<br><br>";
            html += "A good discussion distinguishes between: ";
            html += "(1) technical feasibility of FIML (identification, assumptions); ";
            html += "(2) economic and statistical plausibility of the full system; ";
            html += "(3) your primary object of interest (one equation vs the full system); ";
            html += "(4) efficiency vs robustness. ";
            html += "Most applied micro work uses 2SLS/LIML; FIML is more common in small, well-structured macro models.";
        } else {
            html += "Always weigh efficiency gains from using more structure against the risk of getting that structure wrong.";
        }

        return html;
    }

    function resetPractice() {
        currentScenario = null;
        currentQuestions = [];
        scenariosCompleted = 0;
        document.getElementById("scenariosCompleted").textContent = "0";
        document.getElementById("scenarioDisplay").style.display = "none";
        document.getElementById("calculationArea").style.display = "none";
        document.getElementById("questionsContainer").innerHTML = "";
        document.getElementById("interpretationDisplay").innerHTML = "";
        document.getElementById("dataDisplay").innerHTML = "";
        document.getElementById("scenarioDescription").innerHTML = "";
        console.log("FIML practice reset.");
    }

    document.getElementById("scenariosCompleted").textContent = "0";
</script>
</body>
</html>
