<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wooldridge Ch. 10: Time Series Regression Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Source+Code+Pro:wght@400;500;600&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        :root {
            --primary-green: #2E8B57;
            --secondary-red: #DC143C;
            --accent-darkblue: #1E3A8A;
            --light-green: #90EE90;
            --turquoise: #40E0D0;
            --neutral-lightgray: #F5F5F5;
            --background-cream: #FAFAFA;
            --text-primary: #1F2937;
            --text-secondary: #4B5563;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #DC143C;
            --temporal-blue: #2563EB;
            --flow-teal: #14B8A6;
            --gradient-navy: #1E293B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 50%, #F1F5F9 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background flows */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 30%, rgba(46, 139, 87, 0.03) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(64, 224, 208, 0.04) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, rgba(30, 58, 138, 0.02) 0%, transparent 50%);
            animation: flowingGradients 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes flowingGradients {
            0%, 100% { transform: rotate(0deg) scale(1); }
            33% { transform: rotate(120deg) scale(1.1); }
            66% { transform: rotate(240deg) scale(0.9); }
        }

        .container {
            max-width: 1700px;
            margin: 25px auto;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 80px rgba(30, 58, 138, 0.15);
            border-radius: 30px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            animation: temporalEntry 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes temporalEntry {
            from {
                opacity: 0;
                transform: scale(0.94) translateY(40px);
                filter: blur(8px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }

        /* Header Design with Temporal Flow */
        .header-section {
            background: linear-gradient(135deg, var(--gradient-navy) 0%, #334155 50%, #475569 100%);
            color: white;
            padding: 50px 40px;
            position: relative;
            overflow: hidden;
        }

        .header-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 0%, 
                rgba(64, 224, 208, 0.1) 25%, 
                transparent 50%, 
                rgba(46, 139, 87, 0.08) 75%, 
                transparent 100%);
            animation: temporalWaves 8s ease-in-out infinite;
        }

        @keyframes temporalWaves {
            0%, 100% { transform: translateX(-100px) scaleX(1); opacity: 0.6; }
            50% { transform: translateX(100px) scaleX(1.2); opacity: 0.9; }
        }

        .header-title {
            font-family: 'Libre Baskerville', serif;
            font-size: 3.6em;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 4px 8px rgba(0,0,0,0.4);
            position: relative;
            z-index: 2;
            background: linear-gradient(135deg, white 0%, #E2E8F0 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-subtitle {
            font-size: 1.6em;
            font-weight: 300;
            opacity: 0.92;
            position: relative;
            z-index: 2;
        }

        /* Time Series Inspired Navigation */
        .nav-tabs {
            display: flex;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--flow-teal) 100%);
            padding: 0;
            position: relative;
            overflow: hidden;
        }

        .nav-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 25%;
            background: rgba(255,255,255,0.1);
            transform: translateX(-100%);
            animation: tabFlow 6s ease-in-out infinite;
        }

        @keyframes tabFlow {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(400%); }
        }

        .tab-button {
            flex: 1;
            padding: 25px;
            background: none;
            border: none;
            color: white;
            font-weight: 500;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 4px solid transparent;
            position: relative;
            z-index: 2;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .tab-button.active {
            background: rgba(255,255,255,0.2);
            border-bottom-color: var(--turquoise);
            font-weight: 600;
            box-shadow: inset 0 -4px 0 var(--turquoise);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 50px;
            animation: temporalSlideIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .content-section.active {
            display: block;
        }

        @keyframes temporalSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Section Titles with Temporal Styling */
        .section-title {
            font-family: 'Libre Baskerville', serif;
            font-size: 3em;
            color: var(--secondary-red);
            margin-bottom: 40px;
            text-align: center;
            font-weight: 700;
            position: relative;
            text-shadow: 1px 2px 4px rgba(0,0,0,0.1);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 3px;
            background: linear-gradient(90deg, var(--turquoise) 0%, var(--primary-green) 100%);
            border-radius: 2px;
        }

        /* Theory Framework with Time Series Feel */
        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 35px;
            margin-bottom: 45px;
        }

        .theory-card {
            background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%);
            padding: 40px;
            border-radius: 20px;
            border-left: 6px solid var(--turquoise);
            box-shadow: 0 12px 32px rgba(30, 58, 138, 0.1);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .theory-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(64, 224, 208, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            animation: cardPulse 4s ease-in-out infinite;
        }

        @keyframes cardPulse {
            0%, 100% { transform: scale(1) translateX(0); opacity: 0.5; }
            50% { transform: scale(1.2) translateX(20px); opacity: 0.8; }
        }

        .theory-card:hover {
            transform: translateY(-12px) rotateX(5deg);
            box-shadow: 0 20px 50px rgba(30, 58, 138, 0.15);
            border-left-color: var(--primary-green);
        }

        .theory-card h3 {
            font-family: 'Libre Baskerville', serif;
            color: var(--secondary-red);
            margin-bottom: 20px;
            font-size: 1.7em;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }

        .theory-card p {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 16px;
            position: relative;
            z-index: 2;
        }

        /* Mathematical Equations with Time Series Styling */
        .equation-display {
            background: linear-gradient(135deg, var(--accent-darkblue) 0%, #1E40AF 100%);
            color: white;
            padding: 32px;
            border-radius: 15px;
            margin: 25px 0;
            font-family: 'Source Code Pro', monospace;
            font-size: 1.2em;
            box-shadow: inset 0 2px 15px rgba(0,0,0,0.3), 0 8px 25px rgba(30, 58, 138, 0.2);
            overflow-x: auto;
            border: 2px solid rgba(64, 224, 208, 0.3);
            position: relative;
        }

        .equation-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, var(--turquoise) 50%, transparent 100%);
            animation: equationFlow 3s ease-in-out infinite;
        }

        @keyframes equationFlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Interactive Controls with Temporal Design */
        .control-panel {
            background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 50%, #F8FAFC 100%);
            padding: 40px;
            border-radius: 25px;
            margin: 40px 0;
            border: 3px solid var(--turquoise);
            box-shadow: 0 15px 35px rgba(64, 224, 208, 0.15);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent 0%, rgba(64, 224, 208, 0.05) 25%, transparent 50%, rgba(46, 139, 87, 0.03) 75%, transparent 100%);
            animation: controlFlow 12s linear infinite;
        }

        @keyframes controlFlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .control-header {
            font-family: 'Libre Baskerville', serif;
            color: var(--secondary-red);
            font-size: 2em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 35px;
            position: relative;
            z-index: 2;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .form-group select,
        .form-group input {
            padding: 16px;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            font-size: 1.1em;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--turquoise);
            box-shadow: 0 0 20px rgba(64, 224, 208, 0.3);
            transform: translateY(-3px) scale(1.02);
        }

        /* Action Buttons with Temporal Effects */
        .button-group {
            display: flex;
            gap: 20px;
            margin-top: 35px;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
            transition: left 0.6s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--flow-teal) 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(46, 139, 87, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--flow-teal) 0%, var(--primary-green) 100%);
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(46, 139, 87, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary-red) 0%, #EF4444 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(220, 20, 60, 0.3);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #EF4444 0%, var(--secondary-red) 100%);
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(220, 20, 60, 0.4);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--temporal-blue) 0%, var(--accent-darkblue) 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, var(--accent-darkblue) 0%, var(--temporal-blue) 100%);
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
        }

        /* Results Display with Time Series Styling */
        .results-container {
            background: white;
            border: 3px solid var(--primary-green);
            border-radius: 25px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .results-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--turquoise) 0%, var(--primary-green) 50%, var(--turquoise) 100%);
            animation: resultsBorder 2s ease-in-out infinite;
        }

        @keyframes resultsBorder {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .results-header {
            font-family: 'Libre Baskerville', serif;
            font-size: 2.2em;
            color: var(--secondary-red);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
        }

        /* Time Series Chart Container */
        .chart-container {
            position: relative;
            height: 500px;
            margin: 40px 0;
            background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid var(--light-green);
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 30px;
            margin: 35px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #F8F9FA 0%, #E9ECEF 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #E2E8F0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--turquoise) 0%, var(--primary-green) 100%);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-value {
            font-family: 'Source Code Pro', monospace;
            font-size: 1.8em;
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1em;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Time Series Specific Elements */
        .time-series-info {
            background: linear-gradient(135deg, #E0F2FE 0%, #F0F9FF 100%);
            border: 2px solid var(--temporal-blue);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .lag-structure {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .lag-term {
            background: var(--accent-darkblue);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-family: 'Source Code Pro', monospace;
            font-size: 0.9em;
        }

        /* Assessment and Decision Framework */
        .decision-panel {
            background: linear-gradient(135deg, #F0FFF0 0%, var(--light-green) 100%);
            border: 3px solid var(--primary-green);
            border-radius: 20px;
            padding: 35px;
            margin: 35px 0;
        }

        .decision-question {
            font-family: 'Libre Baskerville', serif;
            font-weight: 600;
            font-size: 1.4em;
            margin-bottom: 25px;
            color: var(--accent-darkblue);
            text-align: center;
        }

        .decision-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .decision-option {
            padding: 20px;
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .decision-option:hover {
            border-color: var(--turquoise);
            background: #F0FFFF;
            transform: translateY(-4px);
        }

        .decision-option.selected {
            border-color: var(--primary-green);
            background: #F0FFF0;
            box-shadow: 0 0 20px rgba(46, 139, 87, 0.2);
        }

        /* Feedback Messages */
        .feedback-message {
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            font-weight: 500;
            font-size: 1.1em;
        }

        .feedback-success {
            background: #F0FFF0;
            border: 2px solid var(--primary-green);
            color: #0D4A22;
        }

        .feedback-warning {
            background: #FFF8E1;
            border: 2px solid var(--warning);
            color: #8B4513;
        }

        .feedback-danger {
            background: #FFE4E6;
            border: 2px solid var(--secondary-red);
            color: #721c24;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin: 15px;
                border-radius: 20px;
            }

            .header-title {
                font-size: 2.6em;
            }

            .theory-grid {
                grid-template-columns: 1fr;
            }

            .control-group {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .button-group {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Wooldridge Chapter References */
        .wooldridge-note {
            background: #F0F8FF;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 5px solid var(--primary-green);
            font-style: italic;
            position: relative;
        }

        .wooldridge-note::before {
            content: 'üìö';
            position: absolute;
            top: 25px;
            left: 20px;
            font-size: 1.2em;
        }

        .wooldridge-note p {
            margin-left: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <h1 class="header-title">Wooldridge Ch. 10: Time Series Regression</h1>
            <p class="header-subtitle">Temporal Analysis & Dynamic Economic Models</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-button active" onclick="showSection('theory')">üìà Time Series Theory</button>
            <button class="tab-button" onclick="showSection('simulation')">‚è∞ Dynamic Simulation</button>
            <button class="tab-button" onclick="showSection('analysis')">üìä Trend Analysis</button>
            <button class="tab-button" onclick="showSection('assessment')">‚úÖ Assessment Mode</button>
        </div>

        <!-- Theory Framework Section -->
        <div id="theory" class="content-section active">
            <h2 class="section-title">Wooldridge Ch. 10 Framework</h2>
            
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>‚è∞ Time Series vs Cross-Section</h3>
                    <p><strong>Wooldridge Distinction:</strong> Time series data has temporal ordering where observations cannot be randomly reordered. This creates new opportunities (dynamics) and challenges (serial correlation).</p>
                    <div class="equation-display">
                        y_t = Œ≤‚ÇÄ + Œ≤‚ÇÅx_{t1} + Œ≤‚ÇÇx_{t2} + ... + u_t
                    </div>
                    <p><em>t = 1, 2, ..., T represents time periods</em></p>
                </div>

                <div class="theory-card">
                    <h3>üìä Static vs Dynamic Models</h3>
                    <p><strong>Static Model:</strong> Only current values of explanatory variables affect y_t</p>
                    <div class="equation-display">
                        gdp_t = Œ≤‚ÇÄ + Œ≤‚ÇÅinvest_t + Œ≤‚ÇÇconsump_t + u_t
                    </div>
                    <p><strong>Dynamic Model:</strong> Past values also matter</p>
                    <div class="equation-display">
                        gdp_t = Œ≤‚ÇÄ + Œ≤‚ÇÅinvest_t + Œ≤‚ÇÇinvest_{t-1} + Œ≤‚ÇÉgdp_{t-1} + u_t
                    </div>
                </div>

                <div class="theory-card">
                    <h3>üìà Finite Distributed Lag (FDL)</h3>
                    <p><strong>Wooldridge FDL Model:</strong> Current y depends on current and q past values of x</p>
                    <div class="equation-display">
                        y_t = Œ± + Œ¥‚ÇÄx_t + Œ¥‚ÇÅx_{t-1} + Œ¥‚ÇÇx_{t-2} + ... + Œ¥_qx_{t-q} + u_t
                    </div>
                    <p><strong>Impact Multipliers:</strong> Œ¥‚ÇÄ (immediate), Œ£Œ¥‚±º (long-run)</p>
                </div>

                <div class="theory-card">
                    <h3>üîÑ Trends & Seasonality</h3>
                    <p><strong>Linear Trend:</strong> y_t = Œ±‚ÇÄ + Œ±‚ÇÅt + u_t</p>
                    <p><strong>Exponential Trend:</strong> log(y_t) = Œ±‚ÇÄ + Œ±‚ÇÅt + u_t</p>
                    <div class="equation-display">
                        Seasonal: y_t = Œ≤‚ÇÄ + Œ≤‚ÇÅQ1_t + Œ≤‚ÇÇQ2_t + Œ≤‚ÇÉQ3_t + u_t
                    </div>
                    <p><em>Seasonality requires dummy variables for periods</em></p>
                </div>

                <div class="theory-card">
                    <h3>üéØ Stationarity & Weak Dependence</h3>
                    <p><strong>Wooldridge Conditions:</strong> For asymptotic theory to work, need weakly dependent time series</p>
                    <div class="equation-display">
                        E[x_t] = Œº, Var[x_t] = œÉ¬≤<br>
                        Cov[x_t, x_{t+h}] ‚Üí 0 as h ‚Üí ‚àû
                    </div>
                    <p><strong>Stationarity:</strong> Mean, variance, and covariances constant over time</p>
                </div>

                <div class="theory-card">
                    <h3>‚àû Asymptotic vs Finite Sample</h3>
                    <p><strong>Key Wooldridge Insight:</strong> With time series, we have T ‚Üí ‚àû but cannot resample. Different assumptions needed.</p>
                    <div class="equation-display">
                        ‚àöT(Œ≤ÃÇ - Œ≤) ‚Üí_d N(0, V) under weak dependence
                    </div>
                    <p><strong>Requirements:</strong> Weak dependence, homoskedasticity, no serial correlation in u_t</p>
                </div>
            </div>

            <div class="theory-card" style="grid-column: 1 / -1;">
                <h3>üá®üá¶ Canadian Time Series Applications</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 25px;">
                    <div>
                        <h4>üìà Macroeconomic Series:</h4>
                        <ul>
                            <li><strong>GDP Growth:</strong> Quarterly real GDP dynamics</li>
                            <li><strong>Inflation:</strong> CPI targeting by Bank of Canada</li>
                            <li><strong>Exchange Rates:</strong> CAD/USD daily movements</li>
                            <li><strong>Interest Rates:</strong> Bank of Canada policy transmission</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üèõÔ∏è Policy & Regional Applications:</h4>
                        <ul>
                            <li><strong>Employment:</strong> Monthly labor force dynamics</li>
                            <li><strong>Commodity Prices:</strong> Oil, wheat, lumber trends</li>
                            <li><strong>Housing Markets:</strong> Provincial price dynamics</li>
                            <li><strong>Provincial Transfers:</strong> Equalization payment effects</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="wooldridge-note">
                <p><strong>üéì Wooldridge Chapter 10 Key Insight:</strong> Time series regression requires different assumptions than cross-sectional analysis. The temporal ordering creates opportunities for dynamic modeling but challenges for inference. Weak dependence replaces random sampling as our fundamental assumption.</p>
            </div>
        </div>

        <!-- Interactive Simulation Section -->
        <div id="simulation" class="content-section">
            <h2 class="section-title">Dynamic Economic Simulation</h2>

            <div class="control-panel">
                <h3 class="control-header">‚è∞ Canadian Economic Time Series</h3>
                
                <div class="control-group">
                    <div class="form-group">
                        <label for="seriesType">Economic Series</label>
                        <select id="seriesType" onchange="updateSeries()">
                            <option value="gdp">Canadian Real GDP (Quarterly)</option>
                            <option value="inflation">CPI Inflation Rate</option>
                            <option value="exchange">CAD/USD Exchange Rate</option>
                            <option value="employment">Employment Rate</option>
                            <option value="housing">Housing Price Index</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="modelType">Model Specification</label>
                        <select id="modelType" onchange="updateModel()">
                            <option value="static">Static Model</option>
                            <option value="lag">Finite Distributed Lag</option>
                            <option value="autoregressive">Autoregressive (AR)</option>
                            <option value="trend">Trend Model</option>
                            <option value="seasonal">Seasonal Model</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="timePeriods">Time Periods</label>
                        <select id="timePeriods">
                            <option value="40">Short (10 years, quarterly)</option>
                            <option value="80" selected>Medium (20 years, quarterly)</option>
                            <option value="120">Long (30 years, quarterly)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="lagOrder">Lag Order (q)</label>
                        <input type="range" id="lagOrder" min="0" max="8" value="2" onchange="updateLagDisplay()">
                        <span id="lagValue">2 lags</span>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generateTimeSeries()">üìà Generate Series</button>
                    <button class="btn btn-secondary" onclick="estimateModel()">üîç Estimate Model</button>
                    <button class="btn btn-accent" onclick="forecastSeries()">üîÆ Forecast</button>
                </div>
            </div>

            <!-- Current Model Display -->
            <div id="modelDescription" class="time-series-info">
                <div class="results-header">Current Model Specification</div>
                <div id="modelText"></div>
                <div id="lagStructure" class="lag-structure"></div>
            </div>

            <!-- Time Series Chart -->
            <div class="chart-container">
                <canvas id="timeSeriesChart"></canvas>
            </div>
        </div>

        <!-- Trend Analysis Section -->
        <div id="analysis" class="content-section">
            <h2 class="section-title">Time Series Analysis Results</h2>

            <div id="estimationResults" class="results-container">
                <div class="results-header">Estimation Output</div>
                <div id="estimationTable"></div>
            </div>

            <div class="stats-grid" id="timeSeriesStats">
                <!-- Dynamic statistics will be populated here -->
            </div>

            <div id="diagnostics" class="results-container">
                <div class="results-header">üîç Time Series Diagnostics</div>
                <div id="diagnosticResults"></div>
            </div>

            <!-- Forecasting Chart -->
            <div class="chart-container">
                <h3 style="text-align: center; margin-bottom: 25px; color: var(--secondary-red);">üìà Forecast Analysis</h3>
                <canvas id="forecastChart"></canvas>
            </div>
        </div>

        <!-- Assessment Mode Section -->
        <div id="assessment" class="content-section">
            <h2 class="section-title">Assessment Challenge</h2>

            <div id="assessmentQuestion" class="decision-panel">
                <div class="decision-question">Loading time series assessment...</div>
                <div class="decision-options" id="assessmentOptions">
                    <!-- Dynamic options will be populated -->
                </div>
                <button class="btn btn-primary" onclick="checkAnswer()" style="margin-top: 30px;">Submit Answer</button>
            </div>

            <div id="assessmentFeedback"></div>

            <div class="button-group" style="margin-top: 40px;">
                <button class="btn btn-secondary" onclick="generateNewQuestion()">üìù New Question</button>
                <button class="btn btn-accent" onclick="showExpertSolution()">üéì Show Expert Solution</button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentSeries = null;
        let currentChart = null;
        let forecastChart = null;
        let selectedAnswer = null;
        let currentQuestion = null;

        // Time Series Specifications
        const seriesDefinitions = {
            gdp: {
                title: "Canadian Real GDP Analysis",
                description: "Quarterly real GDP growth modeling with consumption and investment drivers. Following Wooldridge Ch. 10 approach for macroeconomic time series.",
                variable: "Real GDP (Billions 2012 CAD)",
                equation: "GDP_t = Œ≤‚ÇÄ + Œ≤‚ÇÅINVEST_t + Œ≤‚ÇÇCONSUMP_t + u_t",
                baseline: 2000,
                volatility: 50,
                trend: 1.2,
                seasonal: true,
                wooldridgeNote: "GDP exhibits trends and business cycle fluctuations - perfect for dynamic modeling",
                frequency: "Quarterly",
                source: "Statistics Canada, Table 36-10-0104"
            },
            inflation: {
                title: "Canadian CPI Inflation Dynamics",
                description: "Wooldridge-style inflation modeling with monetary policy transmission mechanisms. Bank of Canada's 2% targeting creates interesting time series properties.",
                variable: "CPI Inflation Rate (%)",
                equation: "INFL_t = Œ≤‚ÇÄ + Œ≤‚ÇÅRATE_t + Œ≤‚ÇÇINFL_{t-1} + u_t",
                baseline: 2.0,
                volatility: 1.0,
                trend: 0.02,
                seasonal: false,
                wooldridgeNote: "Inflation persistence requires autoregressive terms - classic AR modeling",
                frequency: "Monthly",
                source: "Bank of Canada, Consumer Price Index"
            },
            exchange: {
                title: "CAD/USD Exchange Rate Analysis", 
                description: "Daily exchange rate modeling with commodity price linkages. Demonstrates high-frequency financial time series properties.",
                variable: "CAD/USD Exchange Rate",
                equation: "CADUSD_t = Œ≤‚ÇÄ + Œ≤‚ÇÅOIL_t + Œ≤‚ÇÇRATES_t + u_t",
                baseline: 0.75,
                volatility: 0.05,
                trend: 0.001,
                seasonal: false,
                wooldridgeNote: "Exchange rates are nearly random walks - testing ground for unit root concepts",
                frequency: "Daily",
                source: "Bank of Canada, Daily Exchange Rates"
            },
            employment: {
                title: "Canadian Employment Rate Dynamics",
                description: "Monthly employment analysis with seasonal adjustment. Shows how labor market responds to economic shocks over time.",
                variable: "Employment Rate (%)",
                equation: "EMPL_t = Œ≤‚ÇÄ + Œ≤‚ÇÅGDP_t + Œ≤‚ÇÇEMPL_{t-1} + SEASONAL + u_t",
                baseline: 62,
                volatility: 2.0,
                trend: 0.05,
                seasonal: true,
                wooldridgeNote: "Employment has strong seasonal patterns requiring seasonal dummies",
                frequency: "Monthly",
                source: "Statistics Canada, Labour Force Survey"
            },
            housing: {
                title: "Canadian Housing Price Index",
                description: "Regional housing price dynamics with interest rate transmission. Demonstrates asset price bubbles and regional variations.",
                variable: "Housing Price Index (2010=100)",
                equation: "HPI_t = Œ≤‚ÇÄ + Œ≤‚ÇÅRATES_t + Œ≤‚ÇÇINCOME_t + Œ≤‚ÇÉHPI_{t-1} + u_t",
                baseline: 150,
                volatility: 8.0,
                trend: 0.8,
                seasonal: true,
                wooldridgeNote: "Housing prices show momentum and interest rate sensitivity",
                frequency: "Monthly",
                source: "Canadian Real Estate Association (CREA)"
            }
        };

        // Assessment Questions (Wooldridge Ch. 10 focused)
        const assessmentQuestions = [
            {
                question: "In Wooldridge's time series framework, what distinguishes time series from cross-sectional data?",
                options: [
                    "Time series has more observations",
                    "Temporal ordering cannot be rearranged",
                    "Variables are always continuous",
                    "Standard errors are always larger"
                ],
                correct: 1,
                explanation: "Wooldridge emphasizes that time series data has a natural temporal ordering that creates dependencies and cannot be randomly reordered like cross-sectional observations."
            },
            {
                question: "In a finite distributed lag model with q=2, what does Œ¥‚ÇÅ represent?",
                options: [
                    "The immediate impact of x on y",
                    "The impact of x_{t-1} on y_t",
                    "The long-run multiplier",
                    "The error correction term"
                ],
                correct: 1,
                explanation: "In FDL models, Œ¥‚ÇÅ captures how x from one period ago affects current y. Œ¥‚ÇÄ is immediate impact, Œ£Œ¥‚±º is long-run multiplier."
            },
            {
                question: "According to Wooldridge, what assumption replaces 'random sampling' in time series?",
                options: [
                    "Independence over time",
                    "Homoskedasticity",
                    "Weak dependence",
                    "Normal distribution"
                ],
                correct: 2,
                explanation: "Wooldridge shows that weak dependence (covariances decay to zero) replaces random sampling as the key assumption for asymptotic theory."
            },
            {
                question: "Why does Wooldridge recommend seasonal dummies for quarterly data?",
                options: [
                    "To increase R-squared",
                    "To capture systematic seasonal patterns",
                    "To reduce multicollinearity",
                    "To satisfy normality assumptions"
                ],
                correct: 1,
                explanation: "Seasonal dummies capture systematic quarterly patterns (e.g., retail sales in Q4) that would otherwise bias coefficient estimates."
            },
            {
                question: "In Wooldridge's asymptotic theory for time series, what happens as T ‚Üí ‚àû?",
                options: [
                    "Standard errors approach zero",
                    "‚àöT(Œ≤ÃÇ - Œ≤) has normal limiting distribution",
                    "Coefficients become unbiased",
                    "R-squared approaches 1"
                ],
                correct: 1,
                explanation: "Under weak dependence, Wooldridge shows ‚àöT(Œ≤ÃÇ - Œ≤) ‚Üí_d N(0,V), giving us the foundation for time series inference."
            }
        ];

        // Navigation Functions
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
        }

        // Series Management Functions
        function updateSeries() {
            const seriesType = document.getElementById('seriesType').value;
            const series = seriesDefinitions[seriesType];
            
            document.getElementById('modelText').innerHTML = `
                <h3 style="color: var(--secondary-red); margin-bottom: 15px;">${series.title}</h3>
                <p><strong>Economic Context:</strong> ${series.description}</p>
                <div class="wooldridge-note">
                    <p><strong>üéì Wooldridge Methodology:</strong> ${series.wooldridgeNote}</p>
                </div>
                <p><strong>Model Equation:</strong> <code>${series.equation}</code></p>
                <p><strong>Dependent Variable:</strong> ${series.variable}</p>
                <p><strong>Frequency:</strong> ${series.frequency}</p>
                <p><strong>Data Source:</strong> ${series.source}</p>
            `;
            
            updateModel();
        }

        function updateModel() {
            const modelType = document.getElementById('modelType').value;
            const lagOrder = parseInt(document.getElementById('lagOrder').value);
            
            // Update lag structure display
            const lagContainer = document.getElementById('lagStructure');
            lagContainer.innerHTML = '';
            
            if (modelType === 'lag' || modelType === 'autoregressive') {
                for (let i = 0; i <= lagOrder; i++) {
                    const lagDiv = document.createElement('div');
                    lagDiv.className = 'lag-term';
                    if (modelType === 'lag') {
                        lagDiv.textContent = i === 0 ? 'x_t' : `x_{t-${i}}`;
                    } else {
                        lagDiv.textContent = i === 0 ? 'x_t' : `y_{t-${i}}`;
                    }
                    lagContainer.appendChild(lagDiv);
                }
            }
            
            if (currentSeries) {
                generateTimeSeries();
            }
        }

        function updateLagDisplay() {
            const lagOrder = document.getElementById('lagOrder').value;
            document.getElementById('lagValue').textContent = `${lagOrder} lags`;
            updateModel();
        }

        // Data Generation
        function generateTimeSeries() {
            const seriesType = document.getElementById('seriesType').value;
            const modelType = document.getElementById('modelType').value;
            const periods = parseInt(document.getElementById('timePeriods').value);
            const lagOrder = parseInt(document.getElementById('lagOrder').value);
            
            const series = seriesDefinitions[seriesType];
            
            // Generate time series data
            currentSeries = {
                type: seriesType,
                model: modelType,
                periods: periods,
                lagOrder: lagOrder,
                series: series,
                data: []
            };

            // Generate dates
            const startDate = new Date('2000-01-01');
            const frequency = series.frequency === 'Quarterly' ? 3 : 1; // months
            
            // Initialize with baseline values
            for (let t = 0; t < periods; t++) {
                const date = new Date(startDate);
                date.setMonth(date.getMonth() + t * frequency);
                
                let value = series.baseline;
                
                // Add trend
                value += series.trend * t;
                
                // Add seasonal pattern if applicable
                if (series.seasonal) {
                    const season = Math.floor((t % 4));
                    const seasonalEffect = [0, -series.volatility*0.3, series.volatility*0.5, series.volatility*0.2];
                    value += seasonalEffect[season];
                }
                
                // Add AR component for autoregressive models
                if (modelType === 'autoregressive' && t > 0) {
                    value += 0.7 * (currentSeries.data[t-1].value - series.baseline);
                }
                
                // Add distributed lag effects
                if (modelType === 'lag' && t > lagOrder) {
                    let lagEffect = 0;
                    for (let j = 0; j <= lagOrder; j++) {
                        const weight = Math.exp(-j * 0.3); // Decaying weights
                        lagEffect += weight * Math.sin(t * 0.1 + j) * series.volatility * 0.2;
                    }
                    value += lagEffect;
                }
                
                // Add random noise
                value += (Math.random() - 0.5) * series.volatility;
                
                currentSeries.data.push({
                    period: t + 1,
                    date: date,
                    value: Math.max(value, 0), // Ensure non-negative for most series
                    trend: series.baseline + series.trend * t
                });
            }

            updateChart();
        }

        // Chart Updates
        function updateChart() {
            if (!currentSeries) return;
            
            const ctx = document.getElementById('timeSeriesChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }

            const labels = currentSeries.data.map(d => d.date.toISOString().substr(0, 7));
            const actualData = currentSeries.data.map(d => d.value);
            const trendData = currentSeries.data.map(d => d.trend);

            currentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: currentSeries.series.variable,
                        data: actualData,
                        borderColor: '#2E8B57',
                        backgroundColor: 'rgba(46, 139, 87, 0.1)',
                        borderWidth: 2,
                        pointRadius: 2,
                        tension: 0.3
                    }, {
                        label: 'Trend Component',
                        data: trendData,
                        borderColor: '#40E0D0',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `${currentSeries.series.title} - ${currentSeries.model.toUpperCase()} Model`,
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Time Period'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: currentSeries.series.variable
                            }
                        }
                    }
                }
            });
        }

        // Model Estimation
        function estimateModel() {
            if (!currentSeries) {
                alert('Please generate time series data first');
                return;
            }

            // Simplified estimation for demonstration
            const data = currentSeries.data;
            const n = data.length;
            
            // Calculate basic statistics
            const values = data.map(d => d.value);
            const mean = values.reduce((a,b) => a+b, 0) / n;
            const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / (n-1);
            
            // Simple trend estimation
            let trendCoeff = 0;
            let intercept = mean;
            
            if (currentSeries.model === 'trend') {
                let sumXY = 0, sumX = 0, sumX2 = 0;
                for (let i = 0; i < n; i++) {
                    sumXY += (i + 1) * values[i];
                    sumX += (i + 1);
                    sumX2 += (i + 1) * (i + 1);
                }
                trendCoeff = (n * sumXY - sumX * (mean * n)) / (n * sumX2 - sumX * sumX);
                intercept = mean - trendCoeff * (sumX / n);
            }

            // Simple autocorrelation
            let autocorr = 0;
            if (n > 1) {
                let num = 0, denom1 = 0, denom2 = 0;
                for (let i = 1; i < n; i++) {
                    num += (values[i] - mean) * (values[i-1] - mean);
                    denom1 += Math.pow(values[i] - mean, 2);
                    denom2 += Math.pow(values[i-1] - mean, 2);
                }
                autocorr = num / Math.sqrt(denom1 * denom2);
            }

            displayEstimationResults({
                intercept,
                trendCoeff,
                autocorr,
                mean,
                variance,
                observations: n,
                model: currentSeries.model
            });
        }

        function displayEstimationResults(results) {
            // Estimation Table
            document.getElementById('estimationTable').innerHTML = `
                <h4>üéì Wooldridge Time Series Estimation</h4>
                <div style="font-family: 'Source Code Pro', monospace; background: #f8f9fa; padding: 25px; border-radius: 12px; margin: 20px 0;">
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; font-weight: 600; border-bottom: 2px solid #ddd; padding-bottom: 12px;">
                        <div>Parameter</div>
                        <div>Estimate</div>
                        <div>Interpretation</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; padding: 12px 0;">
                        <div>Intercept (Œ≤‚ÇÄ)</div>
                        <div>${results.intercept.toFixed(3)}</div>
                        <div>Baseline level</div>
                    </div>
                    ${results.model === 'trend' ? `
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; padding: 12px 0; background: rgba(46, 139, 87, 0.1);">
                        <div>Trend (Œ≤‚ÇÅ)</div>
                        <div>${results.trendCoeff.toFixed(4)}</div>
                        <div>Per-period change</div>
                    </div>
                    ` : ''}
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; padding: 12px 0;">
                        <div>First-order Autocorr</div>
                        <div>${results.autocorr.toFixed(3)}</div>
                        <div>Serial correlation</div>
                    </div>
                </div>
                <div class="wooldridge-note">
                    <p><strong>üéì Wooldridge Interpretation:</strong> ${results.model === 'trend' ? 
                        `Linear trend of ${results.trendCoeff.toFixed(4)} per period. ` : ''
                    }First-order autocorrelation of ${results.autocorr.toFixed(3)} ${Math.abs(results.autocorr) > 0.3 ? 
                        'suggests significant serial dependence requiring further investigation.' : 
                        'indicates weak dependence assumptions may be satisfied.'}</p>
                </div>
            `;

            // Update statistics display
            document.getElementById('timeSeriesStats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${results.mean.toFixed(2)}</div>
                    <div class="stat-label">Sample Mean</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${Math.sqrt(results.variance).toFixed(2)}</div>
                    <div class="stat-label">Standard Deviation</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.autocorr.toFixed(3)}</div>
                    <div class="stat-label">AR(1) Coefficient</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.observations}</div>
                    <div class="stat-label">Time Periods (T)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.model.toUpperCase()}</div>
                    <div class="stat-label">Model Type</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${Math.abs(results.autocorr) > 0.3 ? '‚ö†Ô∏è' : '‚úÖ'}</div>
                    <div class="stat-label">Weak Dependence</div>
                </div>
            `;

            // Display diagnostics
            displayDiagnostics(results);
        }

        function displayDiagnostics(results) {
            let interpretation = '';
            
            if (Math.abs(results.autocorr) > 0.5) {
                interpretation = 'üö´ <strong>Strong Serial Correlation:</strong> Violates weak dependence assumption. Consider AR modeling or differencing.';
            } else if (Math.abs(results.autocorr) > 0.3) {
                interpretation = '‚ö†Ô∏è <strong>Moderate Serial Correlation:</strong> May require robust standard errors or dynamic specification.';
            } else {
                interpretation = '‚úÖ <strong>Weak Dependence Satisfied:</strong> Standard asymptotic theory likely applies.';
            }

            document.getElementById('diagnosticResults').innerHTML = `
                <h4>üîç Time Series Diagnostics</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin: 25px 0;">
                    <div class="stat-card">
                        <h5>Serial Correlation Test</h5>
                        <p><strong>First-order œÅÃÇ:</strong> ${results.autocorr.toFixed(3)}</p>
                        <p><strong>Critical value:</strong> ¬±0.3 (rule of thumb)</p>
                        <p><strong>Assessment:</strong> ${Math.abs(results.autocorr) > 0.3 ? 'Concerning' : 'Acceptable'}</p>
                    </div>
                    <div class="stat-card">
                        <h5>Stationarity Assessment</h5>
                        <p><strong>Mean level:</strong> ${results.mean.toFixed(2)}</p>
                        <p><strong>Variance:</strong> ${results.variance.toFixed(2)}</p>
                        <p><strong>Trend evidence:</strong> ${Math.abs(results.trendCoeff || 0) > 0.01 ? 'Yes' : 'Minimal'}</p>
                    </div>
                </div>
                <div style="background: #F0F8FF; padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary-green);">
                    <p>${interpretation}</p>
                    <p><strong>Wooldridge Recommendation:</strong> 
                    ${Math.abs(results.autocorr) > 0.3 ? 
                        'Consider dynamic specification with lagged dependent variables or robust inference methods.' :
                        'Standard OLS inference valid under current specification.'
                    }</p>
                </div>
            `;
        }

        // Forecasting
        function forecastSeries() {
            if (!currentSeries) {
                alert('Please generate and estimate a model first');
                return;
            }

            // Simple forecasting logic
            const data = currentSeries.data;
            const lastValue = data[data.length - 1].value;
            const forecastPeriods = 8;
            const forecasts = [];

            // Generate forecasts based on model type
            for (let h = 1; h <= forecastPeriods; h++) {
                let forecast = lastValue;
                
                if (currentSeries.model === 'trend') {
                    forecast += currentSeries.series.trend * h;
                } else if (currentSeries.model === 'autoregressive') {
                    forecast = lastValue * Math.pow(0.7, h); // Simple AR decay
                }
                
                // Add uncertainty
                const uncertainty = Math.sqrt(h) * currentSeries.series.volatility * 0.5;
                
                forecasts.push({
                    period: data.length + h,
                    forecast: forecast,
                    lower: forecast - 1.96 * uncertainty,
                    upper: forecast + 1.96 * uncertainty
                });
            }

            updateForecastChart(forecasts);
        }

        function updateForecastChart(forecasts) {
            const ctx = document.getElementById('forecastChart').getContext('2d');
            
            if (forecastChart) {
                forecastChart.destroy();
            }

            // Combine historical and forecast data
            const historicalData = currentSeries.data.slice(-20).map(d => ({
                x: d.period,
                y: d.value
            }));
            
            const forecastData = forecasts.map(f => ({
                x: f.period,
                y: f.forecast
            }));

            const upperBound = forecasts.map(f => ({
                x: f.period,
                y: f.upper
            }));

            const lowerBound = forecasts.map(f => ({
                x: f.period,
                y: f.lower
            }));

            forecastChart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Historical Data',
                        data: historicalData,
                        borderColor: '#2E8B57',
                        backgroundColor: 'rgba(46, 139, 87, 0.1)',
                        borderWidth: 2,
                        pointRadius: 3
                    }, {
                        label: 'Forecast',
                        data: forecastData,
                        borderColor: '#DC143C',
                        backgroundColor: 'rgba(220, 20, 60, 0.1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 4
                    }, {
                        label: 'Upper 95% CI',
                        data: upperBound,
                        borderColor: '#40E0D0',
                        backgroundColor: 'transparent',
                        borderWidth: 1,
                        pointRadius: 0,
                        fill: false
                    }, {
                        label: 'Lower 95% CI',
                        data: lowerBound,
                        borderColor: '#40E0D0',
                        backgroundColor: 'rgba(64, 224, 208, 0.1)',
                        borderWidth: 1,
                        pointRadius: 0,
                        fill: '-1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `${currentSeries.series.title} - Forecast Analysis`,
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Time Period'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: currentSeries.series.variable
                            }
                        }
                    }
                }
            });
        }

        // Assessment Functions
        function generateNewQuestion() {
            currentQuestion = assessmentQuestions[Math.floor(Math.random() * assessmentQuestions.length)];
            selectedAnswer = null;
            
            document.querySelector('.decision-question').textContent = currentQuestion.question;
            
            const optionsContainer = document.getElementById('assessmentOptions');
            optionsContainer.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'decision-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('assessmentFeedback').innerHTML = '';
        }

        function selectAnswer(answerIndex) {
            selectedAnswer = answerIndex;
            
            document.querySelectorAll('.decision-option').forEach((option, index) => {
                option.classList.toggle('selected', index === answerIndex);
            });
        }

        function checkAnswer() {
            if (selectedAnswer === null) {
                alert('Please select an answer first');
                return;
            }
            
            const isCorrect = selectedAnswer === currentQuestion.correct;
            const feedbackClass = isCorrect ? 'feedback-success' : 'feedback-danger';
            const feedbackTitle = isCorrect ? '‚úì Correct!' : '‚úó Incorrect';
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="${feedbackClass}">
                    <h4>${feedbackTitle}</h4>
                    <p><strong>Explanation:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                </div>
            `;
        }

        function showExpertSolution() {
            if (!currentQuestion) {
                generateNewQuestion();
                return;
            }
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="feedback-success">
                    <h4>üéì Expert Solution</h4>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                    <p><strong>Wooldridge Insight:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Key Learning:</strong> Time series analysis requires different assumptions and methods than cross-sectional data. Understanding these differences is crucial for valid economic inference over time.</p>
                </div>
            `;
        }

        // Initialize page
        window.addEventListener('load', function() {
            updateSeries();
            generateNewQuestion();
        });
    </script>
</body>
</html>
